@import "colors/functions";
@import "colors/mixins";
@import "@material/textfield/mixins";
@import "@material/floating-label/mixins";

$filledTextFieldMapping: (
  ink: high,
  bottomLine: medium,
  helperText: medium,
  textLabel: medium,
  icon: medium,
  caret: accent,
  activeBottomLine: accent,
  activeHelperText: accent,
  activeTextLabel: accent,
);

$outlinedTextFieldMapping: (
  ink: high,
  outline: low,
  helperText: medium,
  textLabel: medium,
  icon: medium,
  caret: accent,
  hoverOutline: low, // Mostly an exception to make GM behave like M
  activeOutline: accent,
  activeHelperText: accent,
  activeTextLabel: accent,
);

@mixin filledTextField($colorSet, $colorMap: $filledTextFieldMapping) {
  @include mdc-text-field-fill-color(ColorSet_getContainer($colorSet));

  @include ifColorMapHasKey($colorMap, ink) {
    @include mdc-text-field-ink-color(getColor($colorSet, $colorMap, ink));
    @include mdc-states(getColor($colorSet, $colorMap, ink));
  }
  
  @include ifColorMapHasKey($colorMap, bottomLine) {
    @include mdc-text-field-bottom-line-color(getColor($colorSet, $colorMap, bottomLine));
  }
  
  @include ifColorMapHasKey($colorMap, helperText) {
    @include mdc-text-field-helper-text-color(getColor($colorSet, $colorMap, helperText));
  }
  
  @include ifColorMapHasKey($colorMap, textLabel) {
    @include mdc-text-field-label-color(getColor($colorSet, $colorMap, textLabel));
  }
  
  @include ifColorMapHasKey($colorMap, icon) {
    @include mdc-text-field-icon-color(getColor($colorSet, $colorMap, icon));
  }
  
  @include ifColorMapHasKey($colorMap, activeBottomLine) {
    @include mdc-text-field-line-ripple-color(getColor($colorSet, $colorMap, activeBottomLine));
  }
  
  @include ifColorMapHasKey($colorMap, caret) {
    @include mdc-text-field-caret-color(getColor($colorSet, $colorMap, caret));
  }
  
  &.mdc-text-field--focused {
    @include ifColorMapHasKey($colorMap, activeTextLabel) {
      @include mdc-text-field-label-color(getColor($colorSet, $colorMap, activeTextLabel));
    }
    
    .mdc-floating-label {
      @include ifColorMapHasKey($colorMap, activeHelperText) {
        @include mdc-floating-label-ink-color(getColor($colorSet, $colorMap, activeHelperText));
      }
    }
  }
}

@mixin outlinedTextField($colorSet, $colorMap: $outlinedTextFieldMapping) {
  @include ifColorMapHasKey($colorMap, ink) {
    @include mdc-text-field-ink-color(getColor($colorSet, $colorMap, ink));
    @include mdc-states(getColor($colorSet, $colorMap, ink));
  }
  
  @include ifColorMapHasKey($colorMap, helperText) {
    @include mdc-text-field-helper-text-color(getColor($colorSet, $colorMap, helperText));
  }
  
  @include ifColorMapHasKey($colorMap, textLabel) {
    @include mdc-text-field-label-color(getColor($colorSet, $colorMap, textLabel));
  }
  
  @include ifColorMapHasKey($colorMap, icon) {
    @include mdc-text-field-icon-color(getColor($colorSet, $colorMap, icon));
  }
  
  @include ifColorMapHasKey($colorMap, caret) {
    @include mdc-text-field-caret-color(getColor($colorSet, $colorMap, caret));
  }
  
  @include ifColorMapHasKey($colorMap, outline) {
    @include mdc-text-field-outline-color(getColor($colorSet, $colorMap, outline));
  }
  
  @include ifColorMapHasKey($colorMap, hoverOutline) {
    @include mdc-text-field-hover-outline-color(getColor($colorSet, $colorMap, hoverOutline));
  }
  
  @include ifColorMapHasKey($colorMap, activeOutline) {
    @include mdc-text-field-focused-outline-color(getColor($colorSet, $colorMap, activeOutline));
  }
  
  &.mdc-text-field--focused {
    @include ifColorMapHasKey($colorMap, activeTextLabel) {
      @include mdc-text-field-label-color(getColor($colorSet, $colorMap, activeTextLabel));
    }
    
    .mdc-floating-label {
      @include ifColorMapHasKey($colorMap, activeHelperText) {
        @include mdc-floating-label-ink-color(getColor($colorSet, $colorMap, activeHelperText));
      }
    }
  }
}
